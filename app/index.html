<!doctype html>
<html class="no-js" ng-app="sharedcostApp">
  <head>
    <meta charset="utf-8">
    <title ng-bind="'SharedCosts - ' + $title">SharedCosts</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/components-font-awesome/css/font-awesome.css" />
    <link rel="stylesheet" href="bower_components/angular-loading-bar/build/loading-bar.css" />
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="bower_components/bootstrap-material-design/dist/css/material.css" />
    <link rel="stylesheet" href="bower_components/bootstrap-material-design/dist/css/ripples.css" />
    <link rel="stylesheet" href="bower_components/morris.js/morris.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
<body>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-material-cyan-A700 navbar-fixed-top" id="slide-nav" ng-controller="NavigationCtrl">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-toggle">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="navbar-brand" href="#/">SharedCosts - {{$title}}</a>
        </div>
        <div id="slidemenu">
          <div class="visible-xs-block" style="height: 100px; background-image: url('http://i.imgur.com/JzqNpVv.jpg'); background-size: cover; vertical-algin: top; padding: 0px 8px">
            <img style="float: right; height: 80px; margin-top: 10px;" ng-src="{{ $currentUser.picture }}" alt="{{ $currentUser.name }}" class="img-circle" /><br />
            <h4>Hello {{ $currentUser.given_name }}</h4>
            <a href="#/logout" style="color: #fff !important">Logout</a>
          </div>
          <ul class="nav navbar-nav">
            <li ng-show="$isLoggedIn"><a href="#/list/add">Create List</a></li>
            <li class="dropdown" ng-show="$isLoggedIn">
              <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Your lists <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">                
                <li ng-repeat="project in projects"><a href="#/list/{{project.id}}">{{project.name}}</a></li>
              </ul>
            </li>
            <li ng-show="$isLoggedIn"><a href="#/list">Manage lists</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right hidden-xs">
            <li class="dropdown" ng-show="$isLoggedIn">            
              <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Hello {{ $currentUser.given_name }} <img ng-src="{{ $currentUser.picture }}" alt="{{ $currentUser.name }}" class="img-circle" title="" style="max-height: 18px;"> <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#/settings">Settings</a></li>
                <li><a href="#/logout">Logout</a></li>
              </ul>
            </li>
            <li class="dropdown" ng-show="!$isLoggedIn">            
              <button type="button" ng-click="login()" class="btn btn-success navbar-btn">Login</button>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
        <div class="row" ui-view></div>
    </div>

    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/angular-cookies/angular-cookies.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/angular-touch/angular-touch.js"></script>
    <script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
    <script src="bower_components/angular-loading-bar/build/loading-bar.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/bootstrap-material-design/dist/js/material.js"></script>
    <script src="bower_components/bootstrap-material-design/dist/js/ripples.js"></script>
    <script src="bower_components/raphael/raphael.js"></script>
    <script src="bower_components/mocha/mocha.js"></script>
    <script src="bower_components/morris.js/morris.js"></script>
    <script src="bower_components/chart-angular-raphaeljs-morris/src/directives/chartangular.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <script>
       $(document).ready(function () {
          //stick in the fixed 100% height behind the navbar but don't wrap it
          $('#slide-nav.navbar .container').append($('<div id="navbar-height-col"></div>'));
          $('#slide-nav.navbar .container').append($('<div id="navbar-height-col-outside"></div>'));

          // Enter your ids or classes
          var toggler = '.navbar-toggle';
          var pagewrapper = '#page-content';
          var navigationwrapper = '.navbar-header';
          var menuwidth = '100%'; // the menu inside the slide menu itself
          var slidewidth = '0px'; //'80%';
          var menuneg = '-100%';
          var slideneg = '-80%';

          $("#slide-nav").on("click", toggler, function (e) {

              var selected = $(this).hasClass('slide-active');
              $('#slidemenu').stop().animate({
                  left: selected ? menuneg : '0px'
              });

              $('#navbar-height-col').stop().animate({
                  left: selected ? slideneg : '0px'
              });

              $('#navbar-height-col-outside').stop().animate({
                  left: selected ? '-100%' : '0px'
              });

              $(pagewrapper).stop().animate({
                  left: selected ? '0px' : slidewidth
              });

              $(navigationwrapper).stop().animate({
                  left: selected ? '0px' : slidewidth
              });
              $(this).toggleClass('slide-active', !selected);
              $('#slidemenu').toggleClass('slide-active');
              $('#page-content, .navbar, body, .navbar-header').toggleClass('slide-active');

          });

          $("#navbar-height-col-outside").on("click", function (e) {
            $(toggler).click();
          });

          var selected = '#slidemenu, #page-content, body, .navbar, .navbar-header';

          $(window).on("resize", function () {
              if ($(window).width() > 767 && $('.navbar-toggle').is(':hidden')) {
                  $(selected).removeClass('slide-active');
              }
          });
      });
    </script>

        <!-- build:js({.tmp,app}) scripts/scripts.js -->
        <script src="scripts/app.js"></script>
        <script src="scripts/services/directives.js"></script>
        <script src="scripts/controllers/main.js"></script>
        <script src="scripts/controllers/projectlist.js"></script>
        <script src="scripts/directives/userbadge.js"></script>
        <script src="scripts/controllers/projectdetail.js"></script>
        <script src="scripts/controllers/navigation.js"></script>
        <script src="scripts/controllers/entryedit.js"></script>

        <script src="scripts/services/waitingdialog.js"></script>
        <!-- endbuild -->
        
</body>
</html>
